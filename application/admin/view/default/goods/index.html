<!-- 继承公共的 form -->
{{extend name="public/form" /}}

<!-- 搜素条件 -->
{{block name="search_form"}}
    <form class="am-form form-validation form-search" method="post" action="{{:MyUrl('admin/goods/index')}}" request-type="form">
        <div class="thin">
            <div class="am-input-group am-input-group-sm am-fl so">
                <input type="text" autocomplete="off" name="keywords" class="am-radius" placeholder="标题/型号" value="{{if !empty($params.keywords)}}{{$params.keywords}}{{/if}}" />
                <span class="am-input-group-btn">
                    <button class="am-btn am-btn-default am-radius" type="submit" data-am-loading="{spinner:'circle-o-notch', loadingText:'搜索中...'}">搜索</button>
                </span>
            </div>
            <label class="am-fl thin_sub more-submit">
                更多筛选条件
                {{if isset($params['is_more']) and $params['is_more'] eq 1}}
                    <input type="checkbox" name="is_more" value="1" id="is_more" checked />
                    <i class="am-icon-angle-up"></i>
                {{else /}}
                    <input type="checkbox" name="is_more" value="1" id="is_more" />
                    <i class="am-icon-angle-down"></i>
                {{/if}}
            </label>
        </div>
        <table class="so-list more-where {{if !isset($params['is_more'])}}none{{/if}}">
            <tbody>
                <tr>
                    <td>
                        <span>分类：</span>
                        <select class="am-radius chosen-select" name="category_id" data-placeholder="商品分类...">
                            <option value="0">商品分类...</option>
                            {{if !empty($goods_category_list)}}
                                {{foreach $goods_category_list as $v}}
                                    <option value="{{$v.id}}" {{if !empty($params['category_id']) and $v['id'] eq $params['category_id']}}selected{{/if}}>一级 - {{$v.name}}</option>
                                    {{if !empty($v['items'])}}
                                        {{foreach $v.items as $vs}}
                                            <option style="padding-left: 30px;" value="{{$vs.id}}" {{if !empty($params['category_id']) and $vs['id'] eq $params['category_id']}}selected{{/if}}>二级 - {{$vs.name}}</option>
                                            {{if !empty($vs['items'])}}
                                                {{foreach $vs.items as $vss}}
                                                    <option style="padding-left: 60px;" value="{{$vss.id}}" {{if !empty($params['category_id']) and $vss['id'] eq $params['category_id']}}selected{{/if}}>三级 - {{$vss.name}}</option>
                                                {{/foreach}}
                                            {{/if}}
                                        {{/foreach}}
                                    {{/if}}
                                {{/foreach}}
                            {{/if}}
                        </select>
                    </td>
                    <td>
                        <span>品牌：</span>
                        <select name="brand_id" class="am-radius chosen-select" data-placeholder="品牌...">
                            {{if !empty($brand_list)}}
                                <option value="0">品牌...</option>
                                {{foreach $brand_list as $v}}
                                    <optgroup label="{{$v.name}}">
                                        {{if !empty($v['items'])}}
                                            {{foreach $v.items as $vs}}
                                                <option style="padding-left: 30px;" value="{{$vs.id}}" {{if isset($params['brand_id']) and $params['brand_id'] eq $vs['id']}}selected{{/if}}>{{$vs.name}}</option>
                                            {{/foreach}}
                                        {{/if}}
                                    </optgroup>
                                {{/foreach}}
                            {{/if}}
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        <span>状态：</span>
                        <select name="is_shelves" class="chosen-select" data-placeholder="上下架状态...">
                            <option value="-1">上下架状态...</option>
                            {{foreach $common_is_shelves_list as $v}}
                                <option value="{{$v.id}}" {{if isset($params['is_shelves']) and $params['is_shelves'] eq $v['id']}}selected{{/if}}>{{$v.name}}</option>
                            {{/foreach}}
                        </select>
                    </td>
                    <td>
                        <span>推荐：</span>
                        <select name="is_home_recommended" class="chosen-select" data-placeholder="首页推荐...">
                            <option value="-1">首页推荐...</option>
                            {{foreach $common_is_text_list as $v}}
                                <option value="{{$v.id}}" {{if isset($params['is_home_recommended']) and $params['is_home_recommended'] eq $v['id']}}selected{{/if}}>{{$v.name}}</option>
                            {{/foreach}}
                        </select>
                    </td>
                </tr>
                <tr>
                    <td class="time">
                        <span>时间：</span>
                        <span>
                            <input type="text" autocomplete="off" name="time_start" class="am-form-field am-input-sm am-radius Wdate" placeholder="起始时间" value="{{if !empty($params.time_start)}}{{$params.time_start}}{{/if}}" data-validation-message="日期格式有误" onclick="WdatePicker({firstDayOfWeek:1,dateFmt:'yyyy-MM-dd'})" autocomplete="off" /><i class="am-icon-calendar"></i>
                        </span>
                        <em class="text-grey">~</em>
                        <span>
                            <input type="text" autocomplete="off" name="time_end" class="am-form-field am-input-sm am-radius Wdate" placeholder="结束时间" value="{{if !empty($params.time_end)}}{{$params.time_end}}{{/if}}" pattern="^[0-9]{4}-[0-9]{2}-[0-9]{2}$" data-validation-message="日期格式有误" onclick="WdatePicker({firstDayOfWeek:1,dateFmt:'yyyy-MM-dd'})" autocomplete="off" /><i class="am-icon-calendar"></i>
                        </span>
                    </td>
                    <td>
                        <button type="submit" class="am-btn am-btn-primary am-radius am-btn-xs btn-loading-example" data-am-loading="{spinner:'circle-o-notch', loadingText:'搜索中...'}">搜索</button>
                        <a href="{{:MyUrl('admin/goods/index')}}" class="am-btn am-btn-warning am-radius am-btn-sm reset-submit">清除条件</a>
                    </td>
                </tr>
            </tbody>
        </table>
    </form>
{{/block}}

<!-- 表单顶部操作栏 -->
{{block name="form_operate_top"}}
    <a href="{{:MyUrl('admin/goods/saveinfo')}}" class="am-btn am-btn-secondary am-radius am-btn-xs am-icon-plus"> 新增</a>
    <!-- 父级内容 -->
    {__block__}
{{/block}}